@model ShopEx01.Web.Infrastructure.Core.PaginationSet<ShopEx01.Web.Models.ProductViewModel>

@{
    ViewBag.Title = "Category";
    Layout = "~/Views/Shared/Layouts.cshtml";
    var category = (ShopEx01.Web.Models.ProductCategoryViewModel)ViewBag.Category;
}

<div class="col-sm-12 padding-right">
    @if (Model.Count > 0)
    {
        <div class="features_items">
            <!--features_items-->
            <h2 class="title text-center">Sản phẩm</h2>
            <div class="clearfix"></div>
            @foreach (var product in Model.Items)
            {
                var url = "/" + product.Alias + ".p-" + product.ID;
                <div class="col-sm-4">
                    <div class="product-image-wrapper">
                        <div class="single-products">
                            <div class="productinfo text-center">
                                <img src="@product.Image" alt="@product.Name" />
                                <h2>@(product.Price == 0 ? "Liên hệ" : product.Price.ToString("N2"))</h2>
                                <p>@product.Name</p>
                                <a href="#" class="btn btn-default add-to-cart"><i class="fa fa-shopping-cart"></i>Thêm vào giỏ hàng</a>
                            </div>
                        </div>
                        <div class="choose">
                            <ul class="nav nav-pills nav-justified">
                                <li><a href="@url"><i class="fa fa-plus-square"></i>Chi tiết sản phẩm</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            }
        </div><!--features_items-->
    }
    else
    {
        <div class="text-center">Không có bản ghi nào được tìm thấy!</div>
    }
    @if (Model.TotalPages > 1)
    {
        // Create numeric links
        var startPageIndex = Math.Max(1, Model.Page - Model.MaxPage / 2);
        var endPageIndex = Math.Min(Model.TotalPages, Model.Page + Model.MaxPage / 2);

        <ul class="pagination">
            @if (Model.Page > 1)
            {
                <li>
                    <a href="?page=1" aria-label="First">
                        <i class="fa fa-angle-double-left"></i>
                    </a>
                </li>
                <li>
                    <a href="?page=@(Model.Page-1)" aria-label="Previous">
                        <i class="fa fa-angle-left"></i>
                    </a>
                </li>
            }

            @for (int i = startPageIndex; i <= endPageIndex; i++)
            {
                if (Model.Page == i)
                {
                    <li class="active"><a href="?page=@i" title="Trang @i">@i</a></li>
                }
                else
                {
                    <li><a href="?page=@i" title="Trang @i">@i</a></li>
                }
            }
            @if (Model.Page < Model.TotalPages)
            {
                <li>
                    <a href="?page=@(Model.Page+1)" aria-label="Next">
                        <i class="fa fa-angle-right"></i>
                    </a>
                </li>
                <li>
                    <a href="?page=@Model.TotalPages" aria-label="Last">
                        <i class="fa fa-angle-double-right"></i>
                    </a>
                </li>
            }
        </ul>
    }
</div>
